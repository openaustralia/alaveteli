<script type="text/javascript">
  $(function() {
     $(".use-datepicker").datepicker(
            {closeText: '<%= _("Done") %>',
             prevText: '<%= _("Prev") %>',
             nextText: '<%= _("Next") %>',
             currentText: '<%= _("Today") %>',
             monthNames: <%= I18n.translate('date.month_names')[1..-1].to_json %>,
             monthNamesShort: <%= I18n.translate('date.abbr_month_names')[1..-1].to_json %>,
             dayNames: <%= I18n.translate('date.day_names').to_json %>,
             dayNamesShort: <%= I18n.translate('date.abbr_day_names').to_json %>,
             dayNamesMin: <%= I18n.translate('date.abbr_day_names').collect{|x| x[0..0]}.to_json %>,
             weekHeader: '<%= _("Wk") %>',
             dateFormat: '<%= I18n.translate('date.formats.default').sub("%Y", "yy").sub("%m", "mm").sub("%d", "dd").gsub("-", "/") %>',
             showButtonPanel : true}
  );
    //Override default jquery ui calendar behaviour to return todays date to input field when today selected.
    //.blur is required to allow reselection of widget if required
    $('button.ui-datepicker-current').live('click', function() {
			$.datepicker._curInst.input.datepicker('setDate', new Date()).datepicker('hide').blur();
		});
});
</script>

